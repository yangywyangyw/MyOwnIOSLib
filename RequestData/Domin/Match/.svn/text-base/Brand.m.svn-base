//
//  Brand.m
//  funMatch_iPad
//
//  Created by Dean on 12-5-25.
//  Copyright (c) 2012å¹´ __MyCompanyName__. All rights reserved.
//

#import "Brand.h"
#import "City.h"
#import "Model.h"

@implementation Brand
@synthesize brandId=_brandId;
@synthesize nameCN=_nameCN;
@synthesize nameEN=_nameEN;
@synthesize logoImg=_logoImg;
@synthesize logothuml=_logothuml;
@synthesize logoShow = _logoShow;
@synthesize cityList=_cityList;
@synthesize modelList = _modelList;
@synthesize selected = _selected;

@synthesize page = _page;
@synthesize index = _index;

-(void)dealloc
{
    [_nameEN release];
    [_nameCN release];
    [_logoImg release];
    [_logothuml release];
    [_logoShow release];
    [_cityList release];
    [_modelList release];
    [super dealloc];
}

- (id)init
{
    if (self = [super init]) {
        self.selected = NO;
        self.page = -1;
        self.index = -1;
    }
    return self;
}

-(id)initWithAttributes:(NSDictionary *)attributes
{
    if(self=[super init]){
        self.selected = NO;
        self.page = -1;
        self.index = -1;
      
        self.brandId = [[attributes valueForKey:@"brand_id"] integerValue];
        self.nameCN = [NSString stringWithFormat:@"%@",[attributes valueForKey:@"name_cn"] ];
        self.nameEN = [NSString stringWithFormat:@"%@",[attributes valueForKey:@"name_en"]];
        self.logoImg = [NSString stringWithFormat:@"%@%@",kWebSiteURL,[attributes valueForKey:@"logo_img"]];
        self.logothuml = [NSString stringWithFormat:@"%@%@",kWebSiteURL,[attributes valueForKey:@"logo_thumbs"]];
        self.logoShow = [NSString stringWithFormat:@"%@%@",kWebSiteURL,[attributes valueForKey:@"logo_show"]];
        
        self.cityList=[NSMutableArray array];
        self.modelList = [NSMutableArray array];
        NSArray *array=[attributes valueForKey:@"city_list"];
        for(NSDictionary *cityDC in array){
            
            City *city=[[City alloc]init];
            city.city_id=[[cityDC valueForKey:@"city_id"] integerValue];
            city.cityName=[NSString stringWithFormat:@"%@",[cityDC valueForKey:@"city_name"]];
            [self.cityList addObject:city];
            [city release];
        }
        NSArray *arrayList = [attributes valueForKey:@"model_list"];
        for(NSDictionary *modelDC in arrayList){
            
            Model *model = [[Model alloc] initWithAttributes:modelDC];
            [self.modelList addObject:model];
            [model release];
        }
        
    }
    
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    if (self = [super init]) {
        self.selected = NO;
        self.brandId = [aDecoder decodeIntegerForKey:@"brandId"];
        self.nameCN = [aDecoder decodeObjectForKey:@"nameCN"];
        self.nameEN = [aDecoder decodeObjectForKey:@"nameEN"];
        self.logoImg = [aDecoder decodeObjectForKey:@"logoImg"];
        self.logothuml = [aDecoder decodeObjectForKey:@"logothuml"];
        self.logoShow = [aDecoder decodeObjectForKey:@"logoShow"];
        self.page = [aDecoder decodeIntegerForKey:@"page"];
        self.index = [aDecoder decodeIntegerForKey:@"index"];
    }
    return self;
}

- (void)encodeWithCoder:(NSCoder *)aCoder
{
    [aCoder encodeInteger:self.brandId forKey:@"brandId"];
    [aCoder encodeObject:self.nameCN forKey:@"nameCN"];
    [aCoder encodeObject:self.nameEN forKey:@"nameEN"];
    [aCoder encodeObject:self.logoImg forKey:@"logoImg"];
    [aCoder encodeObject:self.logothuml forKey:@"logothuml"];
    [aCoder encodeObject:self.logoShow forKey:@"logoShow"];
    [aCoder encodeInteger:self.page forKey:@"page"];
    [aCoder encodeInteger:self.index forKey:@"index"];
}

- (NSUInteger)hash
{
    return self.brandId;
}

- (BOOL)isEqual:(id)object
{
    if ([object isKindOfClass:[Brand class]]) {
        Brand *aBrand = (Brand *)object;
        return self.brandId == aBrand.brandId;
    }
    return NO;
}

@end
